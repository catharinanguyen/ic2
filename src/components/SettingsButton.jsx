import { useDispatch, useSelector } from "react-redux";
import { useRouter } from "next/router";

import { selectCurrentPage, setPage } from "@/store/slices/appStatusSlice";

function SettingsButton() {
  const router = useRouter();
  const dispatch = useDispatch();

  const gCurrentPage = useSelector(selectCurrentPage);

  const handleButtonClick = (e) => {
    e.stopPropagation();
    router.push('/management');
    if (gCurrentPage === 0) {
      dispatch(setPage(1));
    }
  }

  return (
    <button type="button" onClick={handleButtonClick}>
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5003 3.33301C22.0526 3.33301 22.5003 3.78072 22.5003 4.33301V6.90033C24.3236 7.2462 26.0155 7.96332 27.4944 8.97008L29.3106 7.15385C29.7011 6.76333 30.3343 6.76333 30.7248 7.15385L32.8461 9.27517C33.2367 9.6657 33.2367 10.2989 32.8461 10.6894L31.0299 12.5056C32.0367 13.9845 32.7538 15.6764 33.0997 17.4997H35.667C36.2193 17.4997 36.667 17.9474 36.667 18.4997V21.4997C36.667 22.052 36.2193 22.4997 35.667 22.4997H33.0997C32.7538 24.323 32.0367 26.0149 31.0299 27.4937L32.8461 29.3099C33.2366 29.7005 33.2366 30.3336 32.8461 30.7241L30.7248 32.8455C30.3343 33.236 29.7011 33.236 29.3106 32.8455L27.4944 31.0293C26.0155 32.036 24.3236 32.7531 22.5003 33.099V35.6663C22.5003 36.2186 22.0526 36.6663 21.5003 36.6663H18.5003C17.948 36.6663 17.5003 36.2186 17.5003 35.6663V33.099C15.677 32.7531 13.9851 32.036 12.5063 31.0292L10.6901 32.8454C10.2996 33.2359 9.66642 33.2359 9.2759 32.8454L7.15458 30.7241C6.76406 30.3336 6.76406 29.7004 7.15458 29.3099L8.97073 27.4937C7.96397 26.0148 7.24685 24.323 6.90099 22.4997H4.33366C3.78137 22.4997 3.33366 22.052 3.33366 21.4997V18.4997C3.33366 17.9474 3.78137 17.4997 4.33365 17.4997H6.90099C7.24685 15.6764 7.96397 13.9845 8.97073 12.5056L7.15455 10.6895C6.76403 10.2989 6.76403 9.66577 7.15455 9.27525L9.27587 7.15392C9.6664 6.7634 10.2996 6.7634 10.6901 7.15392L12.5063 8.9701C13.9851 7.96332 15.677 7.2462 17.5003 6.90033V4.33301C17.5003 3.78072 17.948 3.33301 18.5003 3.33301H21.5003ZM20.0003 25.833C16.7787 25.833 14.167 23.2213 14.167 19.9997C14.167 16.778 16.7787 14.1663 20.0003 14.1663C23.222 14.1663 25.8337 16.778 25.8337 19.9997C25.8337 23.2213 23.222 25.833 20.0003 25.833Z" fill="#D9D9D9" />
      </svg>
    </button>
  );
}

export default SettingsButton;
